{
  "project": "claude-dashboard",
  "version": "1.0.0",
  "description": "Dashboard tab for Claude Code hook viewer showing sessions, context, and configuration",
  "features": [
    {
      "id": "types",
      "title": "Dashboard Type Definitions",
      "layer": 1,
      "status": "completed",
      "description": "Add TypeScript interfaces for dashboard data structures",
      "acceptanceCriteria": [
        "SessionStatus type defined",
        "DashboardSession interface extends SessionInfo",
        "TokenUsage, GlobalStats interfaces defined",
        "CommandInfo, SkillInfo, HookConfig interfaces defined",
        "DashboardData interface aggregates all data",
        "Type check passes with no errors"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": [],
      "files": [".claude/hooks/viewer/types.ts"]
    },
    {
      "id": "config",
      "title": "Dashboard Configuration",
      "layer": 1,
      "status": "completed",
      "description": "Add paths and timing configuration for dashboard",
      "acceptanceCriteria": [
        "PATHS includes CLAUDE_HOME, STATS_CACHE, COMMANDS_DIR, SKILLS_DIR, SETTINGS_FILE",
        "DASHBOARD_CONFIG defines HEARTBEAT_TIMEOUT_MS, HEARTBEAT_INTERVAL_MS, REFRESH_INTERVAL_MS",
        "Paths resolve correctly on Windows",
        "Type check passes"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": [],
      "files": [".claude/hooks/viewer/config.ts"]
    },
    {
      "id": "heartbeat",
      "title": "Heartbeat Logging Function",
      "layer": 2,
      "status": "completed",
      "description": "Add maybeWriteHeartbeat function to logger utility",
      "acceptanceCriteria": [
        "maybeWriteHeartbeat function exported from logger.ts",
        "Throttles writes to 30 second intervals",
        "Tracks tool_count and message_count",
        "Writes Heartbeat event to session log",
        "Type check passes"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": ["config"],
      "files": [".claude/hooks/utils/logger.ts"]
    },
    {
      "id": "heartbeat-handlers",
      "title": "Integrate Heartbeat in Handlers",
      "layer": 2,
      "status": "completed",
      "description": "Call heartbeat from pre-tool-use and user-prompt-submit handlers",
      "acceptanceCriteria": [
        "pre-tool-use.ts calls maybeWriteHeartbeat with incrementTool=true",
        "user-prompt-submit.ts calls maybeWriteHeartbeat with incrementMessage=true",
        "Heartbeat events appear in session logs during usage",
        "Type check passes"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": ["heartbeat"],
      "files": [
        ".claude/hooks/handlers/pre-tool-use.ts",
        ".claude/hooks/handlers/user-prompt-submit.ts"
      ]
    },
    {
      "id": "dashboard-service",
      "title": "Dashboard Data Service",
      "layer": 3,
      "status": "completed",
      "description": "Create DashboardService class to gather all dashboard data",
      "acceptanceCriteria": [
        "DashboardService class created in viewer/dashboard.ts",
        "getData() returns complete DashboardData",
        "getSessions() computes status from heartbeats and SessionEnd events",
        "getGlobalStats() reads ~/.claude/stats-cache.json",
        "getCommands() parses .claude/commands/*.md frontmatter",
        "getSkills() parses .claude/skills/*.md frontmatter",
        "getHooks() reads hooks from settings.json",
        "getMcpServers() reads enabledMcpjsonServers",
        "Type check passes"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": ["types", "config"],
      "files": [".claude/hooks/viewer/dashboard.ts"]
    },
    {
      "id": "api-endpoint",
      "title": "Dashboard API Endpoint",
      "layer": 3,
      "status": "completed",
      "description": "Add /api/dashboard endpoint to server",
      "acceptanceCriteria": [
        "GET /api/dashboard returns DashboardData JSON",
        "Endpoint handles errors gracefully",
        "Response includes all session, stats, and config data",
        "Type check passes"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": ["dashboard-service"],
      "files": [".claude/hooks/viewer/server.ts"]
    },
    {
      "id": "dashboard-styles",
      "title": "Dashboard CSS Styles",
      "layer": 4,
      "status": "completed",
      "description": "Add CSS styles for dashboard components",
      "acceptanceCriteria": [
        ".dashboard container styles added",
        ".session-grid and .session-card with status colors",
        ".status-badge styles (active=green, inactive=yellow, ended=gray)",
        ".stats-grid and .token-stats for token display",
        ".config-group and .config-item for configuration lists",
        "Dark theme variants included"
      ],
      "verification": "bun run .claude/hooks/viewer/server.ts & timeout 2 && curl -s http://localhost:3456/styles/theme.css | grep -q 'dashboard'",
      "dependencies": [],
      "files": [".claude/hooks/viewer/styles/theme.css"]
    },
    {
      "id": "dashboard-component",
      "title": "Dashboard Vue Component",
      "layer": 4,
      "status": "completed",
      "description": "Add dashboard-view Vue component to index.html",
      "acceptanceCriteria": [
        "Dashboard tab added to tabs array",
        "dashboard-view component renders sessions grid",
        "Token usage section displays model stats",
        "Configuration section shows commands, hooks, skills, MCP servers",
        "Dashboard polls /api/dashboard every 5s when active",
        "Polling stops when switching to other tabs"
      ],
      "verification": "cd .claude/hooks && bun run tsc --noEmit",
      "dependencies": ["api-endpoint", "dashboard-styles"],
      "files": [".claude/hooks/viewer/index.html"]
    },
    {
      "id": "unit-tests",
      "title": "Dashboard Unit Tests",
      "layer": 5,
      "status": "completed",
      "description": "Add unit tests for dashboard service and components",
      "acceptanceCriteria": [
        "Tests for DashboardService.getSessions() status logic",
        "Tests for frontmatter parsing",
        "Tests for API endpoint response structure",
        "All tests pass"
      ],
      "verification": "cd .claude/hooks && bun run test:run",
      "dependencies": ["dashboard-service", "dashboard-component"],
      "files": [".claude/hooks/viewer/__tests__/dashboard.test.ts"]
    },
    {
      "id": "e2e-validation",
      "title": "E2E Dashboard Validation",
      "layer": 6,
      "status": "completed",
      "description": "Validate dashboard functionality with Playwright",
      "acceptanceCriteria": [
        "Dashboard tab is clickable and switches view",
        "Sessions section displays session cards",
        "Status badges show correct colors",
        "Configuration section shows commands/hooks/skills/MCP servers",
        "No console errors"
      ],
      "verification": "Manual E2E test with Playwright MCP tools",
      "dependencies": ["dashboard-component", "unit-tests"],
      "files": []
    }
  ],
  "layers": {
    "1": "Foundation (Types, Config)",
    "2": "Heartbeat Infrastructure",
    "3": "Backend Service & API",
    "4": "Frontend UI (parallel)",
    "5": "Unit Testing",
    "6": "E2E Validation"
  }
}
