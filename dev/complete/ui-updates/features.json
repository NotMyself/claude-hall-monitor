{
  "project": "hook-viewer-ui-improvements",
  "description": "Improve the Claude Code hooks viewer with 6 UI enhancements",
  "created": "2025-12-11",
  "features": [
    {
      "id": "F01",
      "title": "Theme Toggle Text Contrast Fix",
      "description": "Fix theme toggle button text visibility in dark mode by adding proper color variables",
      "layer": 1,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/styles/theme.css"
      ],
      "acceptance_criteria": [
        "Theme toggle text is visible in dark mode",
        "Theme toggle text is visible in light mode",
        "Color uses var(--text-primary) CSS variable"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F02",
      "title": "Reverse Log Entry Order",
      "description": "Display log entries in reverse chronological order (newest first) and scroll to top for new entries",
      "layer": 1,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/index.html"
      ],
      "acceptance_criteria": [
        "filteredEntries computed property returns entries in reverse order",
        "New entries appear at the top of the list",
        "scrollToBottom renamed to scrollToTop and scrolls to top"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F03",
      "title": "Event-Specific Collapsed Display",
      "description": "Add getSummary() method to show contextual summaries for each event type when collapsed",
      "layer": 2,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/index.html",
        ".claude/hooks/viewer/styles/theme.css"
      ],
      "acceptance_criteria": [
        "getSummary(entry) method implemented with logic for all 12 event types",
        "UserPromptSubmit shows truncated prompt text",
        "PreToolUse shows tool name",
        "PostToolUse shows tool name + success/failure indicator",
        "PostToolUseFailure shows tool name + error snippet",
        "SessionStart/End shows session ID",
        "SubagentStart/Stop shows subagent type",
        "Notification shows message",
        "PermissionRequest shows permission type",
        "PreCompact shows compaction reason",
        "Stop shows stop reason",
        "Summary displayed in card-header between badge and expand icon",
        ".entry-summary CSS class added with proper styling"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F04",
      "title": "JSON Syntax Highlighting",
      "description": "Add syntax highlighting for JSON data in expanded log entries",
      "layer": 2,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/index.html",
        ".claude/hooks/viewer/styles/theme.css"
      ],
      "acceptance_criteria": [
        "syntaxHighlight(json) method implemented",
        "JSON keys highlighted with .json-key class",
        "JSON strings highlighted with .json-string class",
        "JSON numbers highlighted with .json-number class",
        "JSON booleans highlighted with .json-boolean class",
        "JSON null values highlighted with .json-null class",
        "Template uses v-html with highlightedJson computed property",
        "Syntax colors work in both light and dark modes (VS Code style)"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F05",
      "title": "Dropdown Checklist for Event Filter",
      "description": "Replace multi-select dropdown with a custom dropdown checklist component for filtering events",
      "layer": 3,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/index.html",
        ".claude/hooks/viewer/styles/theme.css"
      ],
      "acceptance_criteria": [
        "event-filter-dropdown Vue component created",
        "Button shows 'All Events' when all selected",
        "Button shows single event name when one selected",
        "Button shows 'N Events' when multiple but not all selected",
        "Dropdown panel with checkboxes for all 12 event types",
        "Select All button selects all events",
        "Clear button deselects all events",
        "Click-outside closes dropdown",
        "Filtering happens immediately on checkbox toggle",
        "Component replaces <select multiple> in filter-bar",
        "CSS classes: .event-dropdown, .event-dropdown-trigger, .event-dropdown-panel, .event-dropdown-header, .event-checkbox"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F06",
      "title": "Toolbar Redesign",
      "description": "Restructure filter-bar to two-row layout with session selector on top row",
      "layer": 3,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/index.html",
        ".claude/hooks/viewer/styles/theme.css"
      ],
      "acceptance_criteria": [
        "filter-bar uses flex-direction: column",
        "filter-row-top contains session-selector",
        "filter-row-main contains search input, event-filter-dropdown, and clear filters button",
        "CSS classes .filter-row, .filter-row-top, .filter-row-main added",
        "Layout is responsive and looks good at various widths"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F07",
      "title": "Unit Tests for New Features",
      "description": "Add unit tests for new functionality",
      "layer": 4,
      "status": "completed",
      "files": [
        ".claude/hooks/viewer/__tests__/components.test.ts"
      ],
      "acceptance_criteria": [
        "Test for event filter dropdown label logic",
        "Test for log entry summary generation per event type",
        "Test for JSON syntax highlighting regex",
        "Test for reverse ordering behavior",
        "All existing tests still pass"
      ],
      "verification": "cd .claude/hooks && bun run test"
    },
    {
      "id": "F08",
      "title": "E2E Validation with Playwright",
      "description": "Final validation of all UI changes using Playwright browser automation",
      "layer": 5,
      "status": "completed",
      "files": [],
      "acceptance_criteria": [
        "Theme toggle works and text is visible in both modes",
        "Logs display newest first",
        "Event summaries show in collapsed state",
        "JSON syntax highlighting visible in expanded entries",
        "Event filter dropdown opens, filters work",
        "Toolbar layout is correct with two rows"
      ],
      "verification": "Manual Playwright E2E testing via MCP browser tools"
    }
  ],
  "layers": {
    "1": "CSS fixes and simple JS changes (no dependencies)",
    "2": "Core features (depends on Layer 1)",
    "3": "Complex UI components (depends on Layer 2)",
    "4": "Unit testing (depends on Layer 3)",
    "5": "E2E validation (depends on all layers)"
  }
}
